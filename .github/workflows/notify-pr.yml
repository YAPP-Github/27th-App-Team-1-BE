name: PR Notifications

on:
  pull_request:
    types: [opened, closed]
  pull_request_review:
    types: [submitted]

jobs:
  pr-opened:
    if: github.event_name == 'pull_request' && github.event.action == 'opened'
    uses: ./.github/workflows/send-discord-message.yml
    with:
      title: "ğŸ”” ìƒˆë¡œìš´ PR"
      description: "**[#${{ github.event.pull_request.number }}] ${{ github.event.pull_request.title }}**"
      url: ${{ github.event.pull_request.html_url }}
      color: 3447003
      fields: '[{"name":"ì‘ì„±ì","value":"${{ github.event.pull_request.user.login }}","inline":true},{"name":"ë¸Œëœì¹˜","value":"`${{ github.event.pull_request.head.ref }}` â†’ `${{ github.event.pull_request.base.ref }}`","inline":true}]'
    secrets:
      DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}

  pr-merged:
    if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == true
    uses: ./.github/workflows/send-discord-message.yml
    with:
      title: "âœ… PR ë³‘í•© ì™„ë£Œ"
      description: "**[#${{ github.event.pull_request.number }}] ${{ github.event.pull_request.title }}**"
      url: ${{ github.event.pull_request.html_url }}
      color: 5763719
      fields: '[{"name":"ì‘ì„±ì","value":"${{ github.event.pull_request.user.login }}","inline":true},{"name":"ë³‘í•©ì","value":"${{ github.event.pull_request.merged_by.login }}","inline":true},{"name":"ë¸Œëœì¹˜","value":"`${{ github.event.pull_request.head.ref }}` â†’ `${{ github.event.pull_request.base.ref }}`","inline":false}]'
    secrets:
      DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}

  pr-approved:
    if: github.event_name == 'pull_request_review' && github.event.review.state == 'approved'
    uses: ./.github/workflows/send-discord-message.yml
    with:
      title: "ğŸ‘ PR ìŠ¹ì¸"
      description: "**[#${{ github.event.pull_request.number }}] ${{ github.event.pull_request.title }}**"
      url: ${{ github.event.pull_request.html_url }}
      color: 3066993
      fields: '[{"name":"ë¦¬ë·°ì–´","value":"${{ github.event.review.user.login }}","inline":true},{"name":"ì‘ì„±ì","value":"${{ github.event.pull_request.user.login }}","inline":true}]'
    secrets:
      DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}

  pr-changes-requested:
    if: github.event_name == 'pull_request_review' && github.event.review.state == 'changes_requested'
    uses: ./.github/workflows/send-discord-message.yml
    with:
      title: "ğŸ”„ ìˆ˜ì • ìš”ì²­"
      description: "**[#${{ github.event.pull_request.number }}] ${{ github.event.pull_request.title }}**"
      url: ${{ github.event.pull_request.html_url }}
      color: 15105570
      fields: '[{"name":"ë¦¬ë·°ì–´","value":"${{ github.event.review.user.login }}","inline":true},{"name":"ì‘ì„±ì","value":"${{ github.event.pull_request.user.login }}","inline":true}]'
    secrets:
      DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
